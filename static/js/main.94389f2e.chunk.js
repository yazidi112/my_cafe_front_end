(this["webpackJsonpmon-app"]=this["webpackJsonpmon-app"]||[]).push([[0],{142:function(e,t,a){e.exports=a(281)},171:function(e,t){},173:function(e,t){},187:function(e,t){},189:function(e,t){},217:function(e,t){},219:function(e,t){},220:function(e,t){},226:function(e,t){},228:function(e,t){},246:function(e,t){},248:function(e,t){},260:function(e,t){},263:function(e,t){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(138),s=a.n(l),c=a(3),i=a(4),m=a(6),o=a(5),u=a(7),d=a(8),p=a(139),g=a.n(p),E=localStorage.getItem("token"),h=g.a.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(E)}}),v=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",roles:""},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));this.setState({email:e.email}),this.setState({roles:e.roles})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg  navbar-dark bg-dark "},r.a.createElement("a",{className:"navbar-brand",href:"#"},"My ",r.a.createElement("strong",null,r.a.createElement("i",null,"Caf\xe9")," 2020")," ",r.a.createElement("br",null),r.a.createElement("small",{style:{fontSize:"50%"}},r.a.createElement("i",null,"By Imran YAZIDI"))),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav justify-content-center mr-auto "}),r.a.createElement("span",{className:"navbar-text"},r.a.createElement("div",{className:"btn-group m-1",role:"group","aria-label":"Basic example"},r.a.createElement(u.b,{className:"btn btn-info btn-sm pull-right  ",to:"/commandes"},"Mes Commandes"),r.a.createElement(u.b,{className:"btn btn-light text-dark  btn-sm pull-right   ",to:"/commande/new"},"+")),this.state.roles.indexOf("ROLE_ADMIN")>=0&&r.a.createElement("span",null,r.a.createElement(u.b,{className:"btn btn-secondary pull-right m-1 btn-sm",to:"/historique"},"Historique"),r.a.createElement("div",{className:"btn-group m-1",role:"group","aria-label":"Basic example"},r.a.createElement(u.b,{className:"btn btn-warning  pull-right  btn-sm",to:"/categories"},"Cat\xe9gories"),r.a.createElement(u.b,{className:"btn btn-secondary pull-right  btn-sm",to:"/categories/new"},"+")),r.a.createElement("div",{className:"btn-group m-1",role:"group","aria-label":"Basic example"},r.a.createElement(u.b,{className:"btn btn-warning pull-right   btn-sm",to:"/articles"},"Articles"),r.a.createElement(u.b,{className:"btn btn-secondary pull-right   btn-sm",to:"/articles/new"},"+")),r.a.createElement("div",{className:"btn-group m-1",role:"group","aria-label":"Basic example"},r.a.createElement(u.b,{className:"btn btn-success pull-right   btn-sm",to:"/users"},"Utilisateurs"),r.a.createElement(u.b,{className:"btn btn-secondary pull-right   btn-sm",to:"/users/new"},"+")),r.a.createElement(u.b,{className:"btn btn-secondary pull-right m-1 btn-sm",to:"/settings"},"Param\xe8tres")),r.a.createElement(u.b,{className:"btn btn-danger btn-sm ml-2",to:"/logout"},"D\xe9connexion")))))}}]),a}(r.a.Component),b=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={articles:[],message:"",page:1,itemsPerPage:10},e.articlesRefresh=function(){e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/articles?itemsPerPage="+e.state.itemsPerPage+"&page="+e.state.page).then((function(t){var a=t.data;e.setState({articles:a}),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Chargement t\xe9rmin\xe9.")})}))},e.onChangePage=function(t){var a=e.state.page;a=parseInt(a)+parseInt(t),e.setState({page:a}),h.get("/articles?itemsPerPage="+e.state.itemsPerPage+"&page="+a).then((function(t){var a=t.data;e.setState({articles:a}),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Chargement t\xe9rmin\xe9.")})}))},e.onDelete=function(t){if(!window.confirm("Etes-vous s\xfbr de vouloir supprimer ?"))return!1;e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Suppression en cours..")}),h.delete("/articles/".concat(t)).then((function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Suppression effectu\xe9.")}),e.articlesRefresh()}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: "),"Suppression n'est pas effectu\xe9.")})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.articlesRefresh()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Articles"),r.a.createElement("div",{className:"card-body"},this.state.message,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Image"),r.a.createElement("th",null,"Titre"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Cat\xe9gorie"),r.a.createElement("th",{style:{width:200}},"Action"))),r.a.createElement("tbody",null,this.state.articles.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("img",{src:t.image,style:{width:"100px"}})),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.price),r.a.createElement("td",null,t.category.title),r.a.createElement("td",null,r.a.createElement("a",{href:"#",className:"btn btn-sm btn-danger  mr-3",onClick:e.onDelete.bind(e,t.id)},"Supprimer"),r.a.createElement(u.b,{className:"btn btn-sm btn-success",to:"/articles/edit/".concat(t.id)},"Modifier")))}))))),r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("small",null,"Page: ",r.a.createElement("strong",null,this.state.page)),r.a.createElement("ul",{className:"pagination justify-content-center"},r.a.createElement("li",{className:"page-item"},1==this.state.page&&r.a.createElement("button",{class:"page-link",href:"#",disabled:!0},"Pr\xe9cedant"),this.state.page>1&&r.a.createElement("button",{class:"page-link",href:"#",onClick:this.onChangePage.bind(this,-1)},"Pr\xe9cedant")),r.a.createElement("li",{className:"page-item"},0==this.state.articles.length&&r.a.createElement("button",{className:"page-link",href:"#",disabled:!0},"Suivant"),this.state.articles.length>0&&r.a.createElement("button",{className:"page-link",href:"#",onClick:this.onChangePage.bind(this,1)},"Suivant"))))))))}}]),a}(r.a.Component),f=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={redirect:null,article:{title:null,price:null,image:null,category:null},categories:[],message:""},e.onFormSubmit=function(t){t.preventDefault(),e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Ajout en cours..")}),h.post("/articles",e.state.article).then((function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Article est bien ajout\xe9.")}),e.setState({redirect:!0})}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},"Une erreur est survenu merci de ressayer.")})}))},e}return Object(i.a)(a,[{key:"onImageUpload",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var a=new FormData;a.append("file",e.target.files[0]),h.post("../upload",a).then((function(e){var a=t.state.article;a.image=e.data.url,t.setState({article:a})}))}}},{key:"componentDidMount",value:function(){var e=this;h.get("/categories").then((function(t){var a=t.data;e.setState({categories:a})}))}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/articles"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Ajouter un article"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},this.state.message,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Titre"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.article;a.title=t.target.value,e.setState({article:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Prix"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.article;a.price=parseFloat(t.target.value),e.setState({article:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Cat\xe9gorie"),r.a.createElement("select",{onChange:function(t){var a=e.state.article;a.category="/api/categories/"+t.target.value,e.setState({article:a}),console.log(t.target.value)},className:"form-control"},r.a.createElement("option",null,"Choisir une cat\xe9gorie"),this.state.categories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.title)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("img",{src:this.state.article.image,className:"d-block",style:{width:"32px"}}))),r.a.createElement("input",{type:"text",value:this.state.article.image,readOnly:!0,className:"form-control"})),r.a.createElement("input",{type:"file",className:"form-control-file",onChange:this.onImageUpload.bind(this)})),r.a.createElement("button",{className:"btn btn-primary"},"Ajouter"))))))}}]),a}(r.a.Component),N=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={article:{id:null,title:null,price:null,category:null,image:null},categories:[],redirect:null},n.onFormSubmit=function(e){e.preventDefault(),h.put("/articles/"+n.state.article.id,n.state.article).then((function(e){n.setState({redirect:!0})}))};var r=e.match.params;return h.get("/articles/"+r.id).then((function(e){var t=e.data;t.category="/api/categories/"+t.category.id,n.setState({article:t})})),h.get("/categories").then((function(e){var t=e.data;n.setState({categories:t})})),n}return Object(i.a)(a,[{key:"onImageUpload",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var a=new FormData;a.append("file",e.target.files[0]),h.post("../upload",a).then((function(e){var a=t.state.article;a.image=e.data.url,t.setState({article:a})}))}}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/articles"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Modifier un article"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Titre"),r.a.createElement("input",{type:"text",value:this.state.article.title,onChange:function(t){var a=e.state.article;a.title=t.target.value,e.setState({article:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Prix"),r.a.createElement("input",{type:"text",value:this.state.article.price,onChange:function(t){var a=e.state.article;a.price=t.target.value,e.setState({article:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Cat\xe9gorie"),r.a.createElement("select",{onChange:function(t){var a=e.state.article;a.category="/api/categories/"+t.target.value,e.setState({article:a})},className:"form-control"},this.state.article.id&&this.state.categories.map((function(t){return t.id==e.state.article.category.id?r.a.createElement("option",{key:t.id,value:t.id,selected:!0},t.title):r.a.createElement("option",{key:t.id,value:t.id},t.title)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("img",{src:this.state.article.image,className:"d-block",style:{width:"32px"}}))),r.a.createElement("input",{type:"text",value:this.state.article.image,readOnly:!0,className:"form-control"})),r.a.createElement("input",{type:"file",className:"form-control-file",onChange:this.onImageUpload.bind(this)})),r.a.createElement("button",{className:"btn btn-primary"},"Modifier"))))))}}]),a}(r.a.Component),y=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={categories:[],message:""},e.onDelete=function(t){if(!window.confirm("Etes-vous s\xfbr de vouloir supprimer ?"))return!1;e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Suppression en cours..")}),h.delete("/categories/".concat(t)).then((function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Suppression effectu\xe9.")}),e.categoriesRefresh()}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: "),"Suppression n'est pas effectu\xe9.")})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.categoriesRefresh()}},{key:"categoriesRefresh",value:function(){var e=this;this.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/categories").then((function(t){var a=t.data;e.setState({categories:a}),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Chargement termin\xe9..")})}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},"Chargement echou\xe9..")})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Cat\xe9gories"),r.a.createElement("div",{className:"card-body"},this.state.message,r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Image"),r.a.createElement("th",null,"Titre"),r.a.createElement("th",{style:{width:200}},"Action"))),r.a.createElement("tbody",null,this.state.categories.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("img",{src:t.image,style:{width:"100px"}})),r.a.createElement("td",null,t.title),r.a.createElement("td",null,r.a.createElement("a",{href:"#",className:"btn btn-sm btn-danger  mr-3",onClick:e.onDelete.bind(e,t.id)},"Supprimer"),r.a.createElement(u.b,{className:"btn btn-sm btn-success",to:"/categories/edit/".concat(t.id)},"Modifier")))}))))))))}}]),a}(r.a.Component),S=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={redirect:null,title:null,image:null},e.onFormSubmit=function(t){t.preventDefault(),h.post("/categories",{title:e.state.title,image:e.state.image}).then((function(t){console.log(t),e.setState({redirect:!0})}))},e}return Object(i.a)(a,[{key:"onImageUpload",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var a=new FormData;a.append("file",e.target.files[0]),h.post("../upload",a).then((function(e){t.setState({image:e.data.url})}))}}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/categories"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Ajouter une cat\xe9gorie"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Titre"),r.a.createElement("input",{type:"text",onChange:function(t){e.setState({title:t.target.value})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("img",{src:this.state.image,className:"d-block",style:{width:"32px"}}))),r.a.createElement("input",{type:"text",value:this.state.image,readOnly:!0,className:"form-control"})),r.a.createElement("input",{type:"file",className:"form-control-file",onChange:this.onImageUpload.bind(this)})),r.a.createElement("button",{className:"btn btn-primary"},"Ajouter"))))))}}]),a}(r.a.Component),C=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:{id:null,title:null,image:null},redirect:null},e.onFormSubmit=function(t){t.preventDefault(),h.put("/categories/"+e.state.data.id,e.state.data).then((function(t){console.log(t),e.setState({redirect:!0})}))},e}return Object(i.a)(a,[{key:"onImageUpload",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){var a=new FormData;a.append("file",e.target.files[0]),h.post("../upload",a).then((function(e){var a=t.state.data;a.image=e.data.url,t.setState({data:a})}))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;console.log(this.props),h.get("/categories/"+t.id).then((function(t){var a=t.data;e.setState({data:a})}))}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/categories"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Modifier un Cat\xe9gorie"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Titre"),r.a.createElement("input",{type:"text",value:this.state.data.title,onChange:function(t){var a=e.state.data;a.title=t.target.value,e.setState({data:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("img",{src:this.state.data.image,className:"d-block",style:{width:"32px"}}))),r.a.createElement("input",{type:"text",value:this.state.data.image,readOnly:!0,className:"form-control"})),r.a.createElement("input",{type:"file",className:"form-control-file",onChange:this.onImageUpload.bind(this)})),r.a.createElement("button",{className:"btn btn-primary"},"Modifier"))))))}}]),a}(r.a.Component),x=function(){var e=new Date,t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return t+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())},w=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"bg-white p-3 text-center d-none d-print-block",style:{width:"600px",fontSize:"35px"}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.settings.printhead}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},"Commande N\xb0 ",this.props.commande.id&&this.props.commande.id),r.a.createElement("div",{className:"col"},"Serveur: ",this.props.user&&this.props.user.nom," ",this.props.user&&this.props.user.prenom)),r.a.createElement("table",{className:"table tablebordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Article"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Montant"))),r.a.createElement("tbody",null,this.props.commande.lignes.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.article.intitule),r.a.createElement("td",null,e.prix),r.a.createElement("td",null,r.a.createElement("span",{className:"p-2"},e.quantite)),r.a.createElement("td",null,e.montant))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",{colSpan:"4",className:"text-right"},this.props.commande.total)))),r.a.createElement("p",null,this.props.commande.date&&this.props.commande.date.split("T")[0]," -",this.props.commande.date&&this.props.commande.date.split("T")[1]),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.settings.printfoot}}))}}]),a}(r.a.Component),k=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={redirect:null,print:!1,categories:[],messageCategories:"",articles:[],articlesByCategory:[],commande:{id:null,lignes:[],user:null,date:null,total:0,caisse:!1,annulee:!1},user:JSON.parse(localStorage.getItem("user")),settings:{},messages:{article:""},message:"",saved:!1},e.onCategorySelect=function(t){var a=e.state.articles.filter((function(e){return e.category.id==t}));e.setState({articlesByCategory:a})},e.onArticleSelect=function(t,a,n){var r={};r.article={id:t,intitule:a},r.prix=parseFloat(n).toFixed(2),r.quantite=1;var l=parseFloat(1*n).toFixed(2);r.montant=l;var s=e.state.commande;s.total=(parseFloat(s.total)+parseFloat(l)).toFixed(2),s.lignes.push(r),e.setState({commande:s})},e.onArticleDelete=function(t){var a=e.state.commande;a.total=a.total-a.lignes[t].montant,a.lignes.splice(t,1),e.setState({commande:a})},e.onCommandeNew=function(){e.setState({commande:{lignes:[],total:0}}),e.setState({message:""}),e.setState({saved:!1})},e.onCommandePost=function(t){if(t.preventDefault(),e.state.saved)return!1;e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Commande en cours de sauvgarde..")}),h.post("/commandes",{user:"/api/users/"+e.state.user.id,date:x(),caisse:!1,annulee:!1}).then((function(t){if(t.data.id){var a=e.state.commande;a.id=t.data.id,a.user=t.data.user,a.date=t.data.date,e.setState({commande:a}),e.state.commande.lignes.map((function(e){return h.post("/lignecommandes",{article:"/api/articles/"+e.article.id,quantite:e.quantite,prix:parseFloat(e.prix),commande:"/api/commandes/"+t.data.id}).then((function(e){console.log(e.data)}),(function(e){console.log(e)}))})),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Commande Sauvgard\xe9 avec l'ID: ",t.data.id," ")}),e.setState({saved:!0}),window.print(),e.onCommandeNew()}}),(function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.categoriesRefresh(),this.articlesResfresh(),this.settings()}},{key:"settings",value:function(){var e=this;h.get("/settings/1").then((function(t){var a=t.data;e.setState({settings:a})}))}},{key:"categoriesRefresh",value:function(){var e=this;this.setState({messageCategories:r.a.createElement("div",{className:"alert alert-warning"},r.a.createElement("small",null,"Chargement cours.."))}),h.get("/categories").then((function(t){var a=t.data;e.setState({categories:a}),e.setState({messageCategories:""})}),(function(t){e.setState({messageCategories:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("small",null,"Erreur lors de chargement."))})}))}},{key:"articlesResfresh",value:function(){var e=this;h.get("/articles").then((function(t){var a=t.data;e.setState({articles:a}),e.onCategorySelect(1)}))}},{key:"onLigneQteUpdate",value:function(e,t){var a=this.state.commande;a.lignes[e].quantite=parseInt(a.lignes[e].quantite)+parseInt(t),a.lignes[e].montant=(parseFloat(a.lignes[e].prix)*parseFloat(a.lignes[e].quantite)).toFixed(2),a.total=a.lignes.reduce((function(e,t){return parseFloat(e)+parseFloat(t.montant)}),0).toFixed(2),console.log(a.total),this.setState({commande:a})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/categories"}):r.a.createElement("div",null,r.a.createElement(w,{commande:this.state.commande,settings:this.state.settings,user:this.state.user}),r.a.createElement(v,null),r.a.createElement("div",{className:"row d-print-none",style:{height:"600px"}},r.a.createElement("div",{className:"col-md-2 border-right overflow-auto h-100 p-1"},this.state.categories.map((function(t){return r.a.createElement("button",{className:"btn btn-sm btn-light m-1 d-block text-left w-100",key:t.id,onClick:e.onCategorySelect.bind(e,t.id)},r.a.createElement("img",{src:t.image,className:"mr-2",style:{height:"50px"}}),r.a.createElement("strong",null,t.title))})),this.state.messageCategories),r.a.createElement("div",{className:"col-md-5 border-right overflow-auto h-100"},this.state.messages.article,this.state.articlesByCategory.map((function(t){return r.a.createElement("button",{className:"btn btn-sm btn-light m-1",key:t.id,onClick:e.onArticleSelect.bind(e,t.id,t.title,t.price)},r.a.createElement("img",{src:t.image,style:{width:"80px"}}),r.a.createElement("br",null),t.title,r.a.createElement("br",null),r.a.createElement("strong",null,t.price," DH"))}))),r.a.createElement("div",{className:"col-md-5 h-100 p-1"},this.state.message,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col"},r.a.createElement("i",{className:"fa fa-user"}),"  ",this.state.user.nom," ",this.state.user.prenom),r.a.createElement("div",{className:"col text-center big"},"TOTAL: ",r.a.createElement("strong",null,parseFloat(this.state.commande.total).toFixed(2)," DH")),r.a.createElement("div",{className:"col text-right"},r.a.createElement("button",{className:"btn btn-info mr-1",onClick:this.onCommandePost.bind(this)},"Valider"))),r.a.createElement("div",{className:"table-responsive",style:{height:"527px"}},r.a.createElement("table",{className:"print table table-bordered bg-white table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Article"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Montant"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.commande.lignes.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.article.intitule),r.a.createElement("td",null,t.prix),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-warning",onClick:e.onLigneQteUpdate.bind(e,a,-1)},"-"),r.a.createElement("span",{className:"p-2"},t.quantite),r.a.createElement("button",{className:"btn btn-sm btn-warning",onClick:e.onLigneQteUpdate.bind(e,a,1)},"+")),r.a.createElement("td",null,t.montant),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:e.onArticleDelete.bind(e,a)},"X")))})))))))))}}]),a}(r.a.Component),O=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={commandes:[],commande:[],credit:0,user:JSON.parse(localStorage.getItem("user"))},e.onDateChange=function(t){var a=t.target.value.split("T")[0];h.get("/commandes?user="+e.state.user.id+"&date="+a).then((function(t){var a=t.data;e.setState({commandes:a})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.get("../commandes/no_rendu/"+this.state.user.id).then((function(t){var a=parseFloat(t.data.credit).toFixed(2);e.setState({credit:a})}))}},{key:"onCommandeSelect",value:function(e){var t=this;h.get("/lignecommandes?commande="+e).then((function(e){var a=e.data;t.setState({commande:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Cr\xe9dit"),r.a.createElement("div",{className:"card-body"},r.a.createElement("strong",null,this.state.credit," DH")))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Commandes"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"date",onChange:this.onDateChange.bind(this),className:"form-control"})),r.a.createElement("div",{className:"table-responsive",style:{height:"400px"}},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Date de la commande"),r.a.createElement("th",{style:{width:"100px"}}," "))),r.a.createElement("tbody",null,this.state.commandes.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-warning",onClick:e.onCommandeSelect.bind(e,t.id,t.date)},"Afficher")))})))))))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"D\xe9tails de la commande"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive",style:{height:"400px"}},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Article"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Montant"))),r.a.createElement("tbody",null,this.state.commande.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.article.title),r.a.createElement("td",null,e.prix.toFixed(2)),r.a.createElement("td",null,e.quantite),r.a.createElement("td",null,(e.prix*e.quantite).toFixed(2)))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",{colSpan:"4",className:"text-right"},this.state.commande.reduce((function(e,t){return parseFloat(e)+parseFloat(t.prix*t.quantite)}),0).toFixed(2)))))))))))}}]),a}(r.a.Component),j=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={users:[],message:""},e.onDelete=function(t){if(!window.confirm("Etes-vous s\xfbr de vouloir supprimer ?"))return!1;e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Suppression en cours..")}),h.delete("/users/".concat(t)).then((function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Suppression effectu\xe9.")}),e.usersRefresh()}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: "),"Suppression n'est pas effectu\xe9.")})}))},e}return Object(i.a)(a,[{key:"usersRefresh",value:function(){var e=this;this.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/users").then((function(t){var a=t.data;e.setState({users:a}),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Chargement termin\xe9..")})}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},"Chargement echou\xe9..")})}))}},{key:"componentDidMount",value:function(){this.usersRefresh()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Liste des utilisateurs"),r.a.createElement("div",{className:"card-body"},this.state.message,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Nom et pr\xe9nom"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"T\xe9l"),r.a.createElement("th",null,"Admin"),r.a.createElement("th",{style:{width:200}},"Action"))),r.a.createElement("tbody",null,this.state.users.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.nom," ",t.prenom," "),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.tel),r.a.createElement("td",null,t.roles.indexOf("ROLE_ADMIN")>=0?"oui":"non"),r.a.createElement("td",null,t.roles.indexOf("ROLE_ADMIN")<0&&r.a.createElement("a",{href:"#",className:"btn btn-sm btn-danger  m-1 {user.roles.indexOf('ROLE_ADMIN')>=0?'disabled':''}",onClick:e.onDelete.bind(e,t.id)},"Supprimer"),r.a.createElement(u.b,{className:"btn btn-sm btn-success  m-1",to:"/users/edit/".concat(t.id)},"Modifier"),r.a.createElement(u.b,{className:"btn btn-sm btn-warning  m-1",to:"/users/edit/password/".concat(t.id)},"Mot de passe")))})))))))))}}]),a}(r.a.Component),M=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={redirect:null,user:{nom:null,prenom:null,email:null,password:null,adresse:null,tel:null,role:["ROLE_USER"]}},e.onFormSubmit=function(t){t.preventDefault(),h.post("/users/create",e.state.user).then((function(t){console.log(t),e.setState({redirect:!0})}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/users"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Ajouter un utilisateur"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nom"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.nom=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pr\xe9nom"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.prenom=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xe9l\xe9phone"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.tel=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Adresse"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.adresse=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.email=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Mot de passe"),r.a.createElement("input",{type:"text",onChange:function(t){var a=e.state.user;a.password=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("button",{className:"btn btn-primary"},"Ajouter"))))))}}]),a}(r.a.Component),A=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{id:null,nom:null,prenom:null,email:null,adresse:null,tel:null},redirect:null},e.onFormSubmit=function(t){t.preventDefault(),h.put("/users/"+e.state.user.id,e.state.user).then((function(t){console.log(t),e.setState({redirect:!0})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;console.log(this.props),h.get("/users/"+t.id).then((function(t){var a=t.data;e.setState({user:a})}))}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/users"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Modifier un utilisateur"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nom"),r.a.createElement("input",{type:"text",value:this.state.user.nom,onChange:function(t){var a=e.state.user;a.nom=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pr\xe9nom"),r.a.createElement("input",{type:"text",value:this.state.user.prenom,onChange:function(t){var a=e.state.user;a.prenom=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xe9l\xe9phone"),r.a.createElement("input",{type:"text",value:this.state.user.tel,onChange:function(t){var a=e.state.user;a.tel=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Adresse"),r.a.createElement("input",{type:"text",value:this.state.user.adresse,onChange:function(t){var a=e.state.user;a.adresse=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",value:this.state.user.email,onChange:function(t){var a=e.state.user;a.email=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("button",{className:"btn btn-primary"},"Modifier"))))))}}]),a}(r.a.Component),D=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={user:{id:null,password:null},redirect:null,message:""},e.onFormSubmit=function(t){t.preventDefault(),e.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Modification en cours..")}),h.put("/users/password/"+e.state.user.id,e.state.user).then((function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Modification effectu\xe9e..")})}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: "),"Modification erronn\xe9e..")})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=this.state.user;t.id=e.id,this.setState({user:t})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/users"}):r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Modifier le mot de passe"),r.a.createElement("div",{className:"card-body"},this.state.message,r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nouveau Mot de passe"),r.a.createElement("input",{type:"text",value:this.state.user.password,onChange:function(t){var a=e.state.user;a.password=t.target.value,e.setState({user:a})},className:"form-control"})),r.a.createElement("button",{className:"btn btn-primary"},"Modifier"))))))}}]),a}(r.a.Component),F=a(69),I=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={settings:{printhead:null,printfoot:null},message:""},e.onFormSubmit=function(t){t.preventDefault(),h.put("/settings/1",e.state.settings).then((function(t){console.log(t),e.setState({redirect:!0})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({message:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/settings/1").then((function(t){var a=t.data;e.setState({settings:a}),e.setState({message:r.a.createElement("div",{className:"alert alert-success"},"Chargement termin\xe9.")})}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"},"Chargement echou\xe9.")})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},r.a.createElement("h3",{className:"card-title"},"Param\xe9tres")),r.a.createElement("div",{className:"card-body"},this.state.message,r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("h3",null,"Ticket d'impression"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Ent\xeate de page"),r.a.createElement(F.a,{value:this.state.settings.printhead,onChange:function(t){var a=e.state.settings;a.printhead=t.target.value,e.setState({settings:a})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pied de page"),r.a.createElement(F.a,{value:this.state.settings.printfoot,onChange:function(t){var a=e.state.settings;a.printfoot=t.target.value,e.setState({settings:a})}})),r.a.createElement("button",{className:"btn btn-primary"},"Enregistrer les modifications"))))))}}]),a}(r.a.Component),P=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={users:[],commandes:[],commandesMessage:"",commande:[],commandeMessage:"",user:JSON.parse(localStorage.getItem("user")),selecteduser:null,credit:0,creditMessage:"",date:""},e}return Object(i.a)(a,[{key:"onDateChange",value:function(e){var t=this;if(null===this.state.selecteduser)return this.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-danger"},"Vuillez choisir un utilisateur!")}),!1;this.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/commandes?user="+this.state.selecteduser.id+"&date="+e).then((function(e){var a=e.data;t.setState({commandes:a}),t.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-success"},"Commandes charg\xe9es.")})}),(function(e){t.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur:")," Une erreur est survenue veuillez ressayer plus tard.")})}))}},{key:"componentDidMount",value:function(){var e=this;h.get("/users").then((function(t){e.setState({users:t.data})}))}},{key:"onCommandeSelect",value:function(e){var t=this;this.setState({commandeMessage:r.a.createElement("div",{className:"alert alert-warning"},"Chargement en cours..")}),h.get("/lignecommandes?commande="+e).then((function(e){t.setState({commandeMessage:r.a.createElement("div",{className:"alert alert-success"},"D\xe9tails de la commande charg\xe9es.")});var a=e.data;t.setState({commande:a})}),(function(e){t.setState({commandeMessage:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: ")," Une erreur est survenue! Veuillez ressayer plus tard.")})}))}},{key:"onCommandeAnnuler",value:function(e,t){var a=this;this.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-warning"},"Opp\xe9ration en cours..")}),h.put("/commandes/"+e,{annulee:t}).then((function(e){a.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-success"},"Opp\xe9ration effectu\xe9.")}),a.onDateChange(a.state.date)}),(function(e){a.setState({commandesMessage:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: ")," Une erreur est survenue! Veuillez ressayer plus tard.")})}))}},{key:"getCredit",value:function(e){var t=this;h.get("../commandes/no_rendu/"+e).then((function(e){var a=parseFloat(e.data.credit).toFixed(2);t.setState({credit:a})}))}},{key:"onEncaisser",value:function(){var e=this;this.setState({creditMessage:r.a.createElement("div",{className:"alert alert-warning"},"Encaissement en cours..")});var t=this.state.selecteduser.id;h.get("../commandes/rendu/"+t).then((function(a){e.setState({creditMessage:r.a.createElement("div",{className:"alert alert-success"},"Encaissement effectu\xe9e.")}),console.log(a.data.message),e.getCredit(t)}),(function(t){e.setState({creditMessage:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Erreur: ")," Une erreur est survenue! Veuillez ressayer plus tard.")})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Utilisateurs"),r.a.createElement("div",{className:"card-body overflow-auto",style:{height:"290px"}},0===this.state.users.length&&r.a.createElement("small",null,"Chargement des utilisateurs"),this.state.users.map((function(t){return r.a.createElement("button",{className:"btn btn-success m-1 w-100",onClick:function(a){e.setState({selecteduser:t}),e.getCredit(t.id)}},r.a.createElement("i",{className:"fa fa-user"})," ",t.nom," ",t.prenom)})))),r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Solde"),r.a.createElement("div",{className:"card-body"},this.state.creditMessage,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered mt-2"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Montant"),r.a.createElement("th",{style:{width:"100px"}},"Action"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,this.state.credit," DH"),r.a.createElement("td",null,0!==this.state.credit&&r.a.createElement("button",{className:"btn btn-sm btn-success",onClick:this.onEncaisser.bind(this)},"Encaisser"),0===this.state.credit&&r.a.createElement("button",{className:"btn btn-sm btn-success",disabled:!0},"Encaisser"))))))))),r.a.createElement("div",{className:"col-md-5"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"Commandes"),r.a.createElement("div",{className:"card-body"},this.state.commandesMessage,r.a.createElement("div",{className:"form-group"},""==this.state.date&&this.state.selecteduser&&r.a.createElement("small",{className:"text-warning"},"Veuillez choisir une date"),r.a.createElement("input",{type:"date",value:this.state.date,onChange:function(t){var a=t.target.value.split("T")[0];e.setState({date:a}),e.onDateChange(a)},className:"form-control"})),this.state.selecteduser&&r.a.createElement("div",{className:"small"},r.a.createElement("span",null,"Utilisateur:"),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,this.state.selecteduser.nom," ",this.state.selecteduser.prenom))),r.a.createElement("div",{className:"small"},r.a.createElement("span",null,"Nombre de Commandes:"),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,this.state.commandes.length))),r.a.createElement("div",{className:"table-responsive",style:{height:"300px"}},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Date de la commande"),r.a.createElement("th",{style:{width:"170px"}}," Actions"))),r.a.createElement("tbody",null,this.state.commandes.map((function(t){return r.a.createElement("tr",{key:t.id,className:t.annulee?"bg-danger text-white":""},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.date),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-warning btn-sm mr-1",onClick:e.onCommandeSelect.bind(e,t.id)},"Afficher"),t.annulee&&r.a.createElement("button",{className:"btn btn-sm btn-success",onClick:e.onCommandeAnnuler.bind(e,t.id,!1)},"Valider"),!t.annulee&&r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:e.onCommandeAnnuler.bind(e,t.id,!0)},"Annuler")))})))))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header bg-info text-white"},"D\xe9tails de la commande"),r.a.createElement("div",{className:"card-body"},this.state.commandeMessage,r.a.createElement("div",{className:"table-responsive",style:{height:"350px"}},r.a.createElement("table",{className:"table table-bordered table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Article"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Qt\xe9"),r.a.createElement("th",null,"Montant"))),r.a.createElement("tbody",null,this.state.commande.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.article.title),r.a.createElement("td",null,e.prix.toFixed(2)),r.a.createElement("td",null,e.quantite),r.a.createElement("td",null,(e.prix*e.quantite).toFixed(2)))}))))),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tr",null,r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",{colSpan:"4",className:"text-right"},this.state.commande.reduce((function(e,t){return parseFloat(e)+parseFloat(t.prix*t.quantite)}),0).toFixed(2)))))))))}}]),a}(r.a.Component),T=(a(167),a(141)),U=a.n(T),R=(a(280),function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={id:"",email:"",password:"",nom:"",prenom:"",message:"",logged:!1,personnes:[]},e.onEmailChange=function(t,a,n,r){e.setState({email:a}),e.setState({id:t}),e.setState({nom:n}),e.setState({prenom:r})},e.onPwdChange=function(t){e.setState({password:t})},e.onLogin=function(t){t.preventDefault();var a=r.a.createElement("div",{className:"alert alert-warning"},"Connexion en cours..");e.setState({message:a}),h.post("login_check",{username:e.state.email,password:e.state.password}).then((function(t){t.data.token&&(localStorage.setItem("token",t.data.token),e.setState({message:r.a.createElement("div",{className:"alert alert-success"}," ",r.a.createElement("strong",null,"Success :")," Authentication effectu\xe9 avec succes. redirection en cours..")}),h.get("/current_user",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t.data.token)}}).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),e.setState({logged:!0})})))}),(function(t){e.setState({message:r.a.createElement("div",{className:"alert alert-danger"}," ",r.a.createElement("strong",null,"Erreur d'Authentification:")," Nom d'utilisateur ou mot de passe est incorrect.")})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.get("../personnes").then((function(t){var a=t.data;e.setState({personnes:a})}))}},{key:"render",value:function(){var e=this;return this.state.logged?r.a.createElement(d.a,{to:"/commande/new"}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card m-3"},r.a.createElement("div",{className:"card-header  bg-primary text-white"},r.a.createElement("h3",null," My ",r.a.createElement("i",null,"Caf\xe9")," 2020 ",r.a.createElement("small",null,"Authentification"))),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.onLogin},this.state.message,r.a.createElement("div",{className:"form-group"},0===this.state.personnes.length&&r.a.createElement("small",null,"Chargement des utilisateurs en cours.."),this.state.personnes.map((function(t){return r.a.createElement("button",{key:t.id,onClick:function(a){a.preventDefault(),e.onEmailChange(t.id,t.email,t.nom,t.prenom)},className:"btn m-2 btn-info"},r.a.createElement("i",{className:"fas fa-user"})," ",t.nom," ",t.prenom)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Mot de passe"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},this.state.email)),r.a.createElement("input",{type:"password",onChange:function(t){return e.setState({password:t})},value:this.state.password,className:"form-control"})),r.a.createElement(U.a,{onChange:this.onPwdChange})),r.a.createElement("button",{className:"btn btn-primary"},"Connexion")))))}}]),a}(r.a.Component)),q=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(c.a)(this,a),e=t.call(this),localStorage.clear(),e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{to:"/login"})}}]),a}(r.a.Component),L=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:R}),r.a.createElement(d.b,{path:"/commande/new",exact:!0,component:k}),r.a.createElement(d.b,{path:"/commandes",exact:!0,component:O}),r.a.createElement(d.b,{path:"/categories",exact:!0,component:y}),r.a.createElement(d.b,{path:"/categories/new",exact:!0,component:S}),r.a.createElement(d.b,{path:"/categories/edit/:id",exact:!0,component:C}),r.a.createElement(d.b,{path:"/articles",exact:!0,component:b}),r.a.createElement(d.b,{path:"/articles/new",exact:!0,component:f}),r.a.createElement(d.b,{path:"/articles/edit/:id",exact:!0,component:N}),r.a.createElement(d.b,{path:"/users",exact:!0,component:j}),r.a.createElement(d.b,{path:"/users/new",exact:!0,component:M}),r.a.createElement(d.b,{path:"/users/edit/:id",exact:!0,component:A}),r.a.createElement(d.b,{path:"/settings",exact:!0,component:I}),r.a.createElement(d.b,{path:"/historique",exact:!0,component:P}),r.a.createElement(d.b,{path:"/users/edit/password/:id",exact:!0,component:D}),r.a.createElement(d.b,{path:"/login",exact:!0,component:R}),r.a.createElement(d.b,{path:"/logout",exact:!0,component:q}))))}}]),a}(r.a.Component);s.a.render(r.a.createElement(L,null),document.querySelector("#root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.94389f2e.chunk.js.map